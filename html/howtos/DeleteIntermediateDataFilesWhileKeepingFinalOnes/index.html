<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="keywords" content="R, Bioconductor, Affymetrix">
  <meta name="author" content="Henrik Bengtsson">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="../../assets/ico/favicon.png">
  <title title="The Aroma Project (Aroma): How to: Delete intermediate data files while keeping final ones">Aroma: How to: Delete intermediate data files while keeping final ones</title>
  <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/css/cbc-tweaks.css" rel="stylesheet">
  <link href="../../assets/css/r_highlight.css" rel="stylesheet">
  <script src="../../assets/js/r_highlight.js"></script>
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation" id="topnavbar">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html" title="The Aroma Project">Aroma</a>
    </div>

    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="../../getstarted/index.html">Get Started</a></li>
        <li><a href="../../docs/index.html">Documentation</a></li>
        <li><a href="../../features/index.html">Features</a></li>
        <li><a href="../../resources/index.html">Resources</a></li>
        <li><a href="../../forum/index.html">Forum</a></li>
        <li><a href="../../FAQ/index.html">FAQ</a></li>
        <li><a href="../../developers/index.html">Developers' Corner</a></li>
        <li><a href="../../about/index.html">About</a></li>
      </ul>
    </div>
  </div>
</nav>

<div id="wrap">
<div class="bs-docs-header" id="content">
<div class="container">
<h1>How to: Delete intermediate data files while keeping final ones</h1>

<p>Author: Henrik Bengtsson<br>
Created on: 2010-05-17</p>

<p>The aroma framework uses the file system to store intermediate and final
data sets.  This way data is only kept in the memory (RAM) when needed
making it possible to process data sets of virtually any size.  The only
limitation is the available disk space.  Another advantage is that if a
data set has already been processed by an algorithm, then the already
available results are quickly retrieved from the file system instead of
being regenerated.  This is especially handy when working with the data
interactively.</p>

<p>After completing an analysis it is possible to delete intermediate data
files while keeping the final results.  The only important thing to keep
in mind is to never delete your raw/original data files, which typically
are located in the rawData/ directory (or similar).  As long as you have
the original data files (together with the annotation data files), you
can always regenerate the results by running the same analysis script.</p>

<p>After deleting intermediate files, one need to retrieve the final
results explicitly, instead of using the analysis script, otherwise the
analysis will be redone.</p>

<h2>Example</h2>

<p>Say you run CRMA v2 on a GenomeWideSNP_6 data set named
&#39;HapMap270,6.0,CEU,testSet&#39;.  This can be done by:</p>

<pre><code class="r">dataSet &lt;- &quot;HapMap270,6.0,CEU,testSet&quot;
chipType &lt;- &quot;GenomeWideSNP_6,Full&quot;
csR &lt;- AffymetrixCelSet$byName(dataSet, chipType=chipType)
print(csR)

## AffymetrixCelSet:
## Name: HapMap270
## Tags: 6.0,CEU,testSet
## Path: C:/Users/hb/Documents/My
## Data/rawData/HapMap270,6.0,CEU,testSet/GenomeWideSNP_6
## Platform: Affymetrix
## Chip type: GenomeWideSNP_6,Full
## Number of arrays: 6
## Names: NA06985, NA06991, ..., NA07019
## Time period: 2007-03-06 12:13:04 -- 2007-03-06 19:17:16
## Total file size: 395.13MB
## RAM: 0.01MB


ds &lt;- doCRMAv2(csR, verbose=-10)
print(ds)

## AromaUnitTotalCnBinarySet:
## Name: HapMap270
## Tags: 6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY
## Full name: HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY
## Number of files: 6
## Names: NA06985, NA06991, ..., NA07019 [6]
## Path (to the first file): totalAndFracBData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY/GenomeWideSNP_6
## Total file size: 43.06 MB
## RAM: 0.00MB
</code></pre>

<p>The raw data is located in directory
rawData/HapMap270,6.0,CEU,testSet/GenomeWideSNP_6/ and the final data
is located in
directory totalAndFracBData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY/GenomeWideSNP_6/.</p>

<p>What is not shown are the intermediate data sets generated by CRMA v2 (to
see the intermediate steps, see the corresponding vignette).  Those are
stored under probeData/ and plmData/ and can be identified by their
fullnames (names &amp; tags) and chip types.  More precisely, for the data
set processed here, the intermediate results are located in directories:</p>

<ol>
<li>probeData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY/GenomeWideSNP_6/</li>
<li>probeData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY/GenomeWideSNP_6/</li>
<li>plmData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B/GenomeWideSNP_6/</li>
<li>plmData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY/GenomeWideSNP_6/</li>
</ol>

<p>These can safely be deleted, while retaining the final results (and the
raw data files).  The size of data files in probeData/ is similar to the
ones in rawData/, whereas the data files in plmData/ are significantly
smaller.  Thus, the intermediate data sets take up roughly 2-3 times the
disk space as the original data set.</p>

<p>After deleting intermediate data sets we can no longer use <code>doCRMAv2()</code> to
get the results, because then CRMA v2 will be redone.  Instead, we
retrieve the final results as:</p>

<pre><code class="r">dataSet &lt;- &quot;HapMap270,6.0,CEU,testSet&quot;
tags &lt;- &quot;ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY&quot;
chipType &lt;- &quot;GenomeWideSNP_6&quot;
ds &lt;- AromaUnitTotalCnBinarySet$byName(dataSet, tags=tags, chipType=chipType)
print(ds)

## AromaUnitTotalCnBinarySet:
## Name: HapMap270
## Tags: 6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY
## Full name: HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY
## Number of files: 6
## Names: NA06985, NA06991, ..., NA07019 [6]
## Path (to the first file):
## totalAndFracBData/HapMap270,6.0,CEU,testSet,ACC,ra,-XY,BPN,-XY,AVG,A+B,FLN,-XY/GenomeWideSNP_6
## Total file size: 43.06 MB
## RAM: 0.00MB
</code></pre>

<p>Note how we just have appended the new tags to the original data set
(full)name, and we now specify that the data set to be retrieved is of
class AromaUnitTotalCnBinarySet.</p>
</div>
</div> 
</div> 

<div id="filler"></div>


<div id="push"></div> 
<div id="footer" style="height: auto;">
  <div class="container">
<p class="muted credit" style="font-size: small;">
  The Aroma Project
  <span class="printonly">(http://www.aroma-project.org/)</span>
  ::
  Â© Henrik Bengtsson
  ::
  Powered by <a href="http://cran.r-project.org/package=R.rsp">RSP</a>

  <span style="float: right;">
  <a href="http://validator.w3.org/check?st=1;outline=1;verbose=1;group=1&amp;uri=http://www.aroma-project.org/howtos/DeleteIntermediateDataFilesWhileKeepingFinalOnes/" aria-label="Validate HTML" id="validate-page" target="_blank"><span class="glyphicon glyphicon-check" title="Validate HTML" aria-hidden="true"></span><span class="sr-only sr-only-focusable">Validate HTML</span></a>
  &nbsp;
  <a href="https://github.com/AromaProject/aroma.project.org-website/tree/master/content/howtos/DeleteIntermediateDataFilesWhileKeepingFinalOnes/index.md.rsp" id="edit"
  target="_blank"><span class="glyphicon glyphicon-edit" title="Edit page" aria-hidden="true"></span><span class="sr-only sr-only-focusable">Edit page</span></a>
  &nbsp;
  <a href="http://v1.aroma-project.org/howtos/DeleteIntermediateDataFilesWhileKeepingFinalOnes/" id="old-page"
  target="_blank"><span class="glyphicon glyphicon-time" title="Go to old page" aria-hidden="true"></span><span class="sr-only sr-only-focusable">Go to old page</span></a>
  </span>
</p>

  </div>
</div>

<div class="device-xs visible-xs"></div>
<div class="device-sm visible-sm"></div>
<div class="device-md visible-md"></div>
<div class="device-lg visible-lg"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="../../assets/js/post-jquery.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="../../assets/js/post-bootstrap.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-11999401-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
